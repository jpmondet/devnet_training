# Control Theory

Responsiveness VS Stability

## Vocabulary

- **plant** : System to be controlled
- **disturbance** signal : Uncontrollable signal
- **responsive** or **gain** : System that try to restore the reference value rapidly
- A system : the plan, a controller, the disturbance, a measurement process
- Effort : Input into the system
- Flow : Caused/generated by an Effort
- Power : Product of Effort and Flow
- Energy : Total power over a time duration
- Active component (of a system) : Generate power
- Passive component : Store & dissipate energy

## Mathematical representation of a (LTI) system

1. State variable
2. Impulse response
3. Transfer function

1. State variable 

State variables are chosen to represent the system. Generally, it corresponds to the storage elements.

See the representation image for sosi system.

mimo system replace the scalars (input/output & disturbance) by vectors.

Also, for non-LTI, the system is fully represented by x'=f(x,u,w) and y=g(x,u,w) however resolving it is harder. It can often be done by linearizing it by approximating f & g using the Taylor expansion.

2. Impulse response model 

Use an impulse response function g(t) (response to a DIRAC-DELTA input) such that the system is caracterized by y(t) = u(t) (Ã—) g(t)

3. Transfer function model

Convolution is hard to resolve, fortunately, by taking the Laplace transforms of the previous model, it becomes way easier Y(s) = U(s)G(s). G(s) is the transfer function

The concepts of poles and zeros of Laplace are also applicable here allowing to analyze the stability of the system.

However, the big drawback of this method is that it doesn't work for MIMO and non-linear systems.

## First Order system

System characterized by the transfer function G(s) = K / (1+TOs) ; K being the **gain** and TO the **system time constant**

In general, the response to a (brutal) change in input is composed of 2 terms : the **steady state response** (the asymptotic stability) and the **transient** response (before arriving to the steady state).

## Second Order System

This kind of system generally respond to an input by accumulating and then releasing energy (think of a bow)

The transfer function is given by G(s) = K / ((s^2/OMEGAn^2)+(2.ZETA.s/OMEGAn)+ 1)

As before, K is the **gain**, OMEGAn is the **natural frequency** and ZETA the **damping ratio**

The gain controls the **steady state**, the natural frequency the oscillations
(stability) and the damping ratio the responsiveness.

A visual example/summary with a step response of the damping in [here](./random_web_findings/damping.png)


## Feedback control system

As the name suggest, those systems have a feedback loop giving hints to the controller about the state of the system.

The controller can then take actions to correct its output to reach a state where the reference input = the output of the system despite the disturbances.

**Fundamental equation** : Y = (GD/(1+GDH))R + (G/(1+GDH))W

Where: 
- R(s) is the Laplace transform of the Reference Input
- H(s) is the Laplace transform of the Measurement Process
- D(s) is the Laplace transform of the Controller
- W(s) is the Laplace transform of the Disturbance
- G(s) is the Laplace transform of the Plant 
- Y(s) is the Laplace transform of the Output

Actually, the controller must ensure 2 things : 
- the output rapidly reach the reference input (during the **settling time**)
- the eliminatation of the **steady state error** (y-r)

### Constraints

To ensure the previous things, the controller should take into account the :
- stability (return to the desired state)
Multiple kind of stability : 
  - Bounded-Input-Bounded-Output 
  - Zero-input (= the system goes back to zero equilibrium state when 0 input)
- disturbance rejection (avoid being subject to disturbances)
- transient response (response due to disturbance and time to come back to equilibrium)
- linearity (if the system becomes non-linear, the controller put it back into the linear range)
- measurement error
- robustness (robust against events outside of all the assumptions made during the design of the controller)

## PID Control

### Proportional

Reacts proportionally to errors 

u = Kp.e  <-L-> U = Kp.E ; Kp = loop gain

Issue : Need a steady-state error term if we want a non-zero control input

### Integral

Reacts to accumulated errors instead of current error only. It eliminates the need for steady-state error

u = Ki.INTEGRAL(e) <-L-> U = Ki.E/s

Issue: Makes the control less stable (generates oscillations)

### Derivative

Reacts on the error "trend" (increasing/decreasing) 

Must be combined with Proportional or Integral to avoid constand steady-state error (zero derivative)

u = Kd(de/dt) <-L-> U = Kd.E

Issue : Spikes/Noise could make the controller strongly react when it's not needed

### Combining modes

PID controllers gives the ability to play with all 3 gains factors mutually removing issues of one another

U = (Kp + Ki/s + Kd.s).E

## Cascade Control

Multiple controllers act at different granularity/time-scales

## Control delay

Add complexity to the analysis but still modelizable by introducing a delay TO <-L-> e^(-st) to the error : 

E = R - Y.e^(-st)

This delay is generally responsible of the tradeoff between stability & responsiveness since the controller can't have the measurement informations right away.

## Stability

### BIBO stability of LTI system










